#!/bin/bash

if [ -f "include/startup.sh" ]; then
    . include/startup.sh
elif [ -f "../include/startup.sh" ]; then
    . ../include/startup.sh
fi

apt install -y update-motd | log
waitOrStop 0

rootDir=$(rootDir)

echo "Adding $rootDir/DESCRIPTION.TXT to /etc/update-motd.d/98-description file" | log

if [ -f "$rootDir/DESCRIPTION.TXT" ];
then

    echo "#!/bin/sh" >> /etc/update-motd.d/98-description
    echo "echo \"=== System Description =======================================================\"" >> /etc/update-motd.d/98-description
    echo "echo \" \""  >> /etc/update-motd.d/98-description
    echo "cat $rootDir/DESCRIPTION.TXT" >> /etc/update-motd.d/98-description
    echo "echo \" \""  >> /etc/update-motd.d/98-description
    echo "echo \"==============================================================================\""  >> /etc/update-motd.d/98-description
    echo "echo \" \""  >> /etc/update-motd.d/98-description
    echo "echo \"To delete this message of the day: rm -rf /etc/update-motd.d/98-description  \""  >> /etc/update-motd.d/98-description

    chmod +x /etc/update-motd.d/98-description

fi

update-motd

exit 0

tagScript success