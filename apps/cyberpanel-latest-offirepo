#!/bin/bash

if [ -f "include/startup.sh" ]; then
    . include/startup.sh
elif [ -f "../include/startup.sh" ]; then
    . ../include/startup.sh
fi

rootDir=$(rootDir)

echo "Downloading and installing CyberPanel & OpenLiteSpeed" | log
curl --silent -o cyberpanel.sh "https://cyberpanel.sh/?dl&Ubuntu"
waitOrStop 0 "File not downloaded from official source"
chmod +x cyberpanel.sh
export DEBIAN_FRONTEND=noninteractive
bash cyberpanel.sh -v ols -a -p '${ADMINPASSWORD}' >/dev/null 2>&1
waitOrStop 0 "Failed to install CyberPanel"

echo "Adding descriptions" | log
descriptionAppend "CyberPanel UI: https://${CWM_DOMAIN}:8090"
descriptionAppend "OpenLiteSpeed UI: https://${CWM_DOMAIN}:7080"
descriptionAppend "CyberPanel User: admin"
descriptionAppend "CyberPanel Password: ${ADMINPASSWORD}"

tagScript success

exit 0
